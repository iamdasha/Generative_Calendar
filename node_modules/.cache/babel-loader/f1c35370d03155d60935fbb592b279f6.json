{"ast":null,"code":"import p5 from 'p5';\nimport { getRandomArbitrary } from '../utilities';\nimport { getStoreShift, getStoreEnthropy, getStoreEffect } from './store';\nvar canvasSize = 600;\nvar shiftSize = {\n  x: 0,\n  y: 0\n};\nvar canvasContainerId = '';\nvar shiftSeed = 5;\nvar cells = 30;\nvar cellSize = calcCellSize();\nvar xCenter, yCenter;\n\nfunction calcCellSize() {\n  return canvasSize / cells;\n}\n\nfunction drawTile(p, row, column) {\n  if (getStoreEffect()) {\n    var weight = getRandomArbitrary(0, 4);\n    p.strokeWeight(weight);\n  }\n\n  if (getStoreEnthropy()) {\n    shiftSeed = (row + column) / 8;\n  }\n\n  if (getStoreShift()) {\n    var s = getRandomArbitrary(-shiftSeed, shiftSeed);\n    shiftSize.x = s;\n    shiftSize.y = s;\n  } else {\n    shiftSize.y = getRandomArbitrary(-shiftSeed, shiftSeed);\n  }\n\n  xCenter = (column + 1) * cellSize - cellSize / 2 + shiftSize.x;\n  yCenter = (row + 1) * cellSize - cellSize / 2 + shiftSize.y;\n\n  if (column === 0) {\n    p.beginShape();\n    p.vertex(xCenter, yCenter);\n  } else {\n    p.bezierVertex(xCenter, yCenter, xCenter, yCenter, xCenter, yCenter);\n  }\n\n  if (column === cells - 1) {\n    p.endShape();\n  }\n}\n\nfunction drawTiles(p) {\n  p.background(0);\n\n  if (getStoreEffect()) {\n    cells = Math.floor(getRandomArbitrary(30, 120));\n    cellSize = calcCellSize();\n  }\n\n  for (var row = 0; row < cells; row++) {\n    for (var column = 0; column < cells; column++) {\n      drawTile(p, row, column);\n    }\n  }\n}\n\nfunction sketch(p) {\n  p.setup = function () {\n    var canvas = p.createCanvas(canvasSize, canvasSize);\n    canvas.parent(canvasContainerId);\n    p.frameRate(6);\n    p.stroke(121, 255, 57);\n    p.noFill(); // p.fill(141)\n  };\n\n  p.draw = function () {\n    drawTiles(p);\n  };\n}\n\nfunction initSketch(id) {\n  canvasContainerId = id;\n  new p5(sketch);\n}\n\nexport { initSketch };","map":{"version":3,"names":["p5","getRandomArbitrary","getStoreShift","getStoreEnthropy","getStoreEffect","canvasSize","shiftSize","x","y","canvasContainerId","shiftSeed","cells","cellSize","calcCellSize","xCenter","yCenter","drawTile","p","row","column","weight","strokeWeight","s","beginShape","vertex","bezierVertex","endShape","drawTiles","background","Math","floor","sketch","setup","canvas","createCanvas","parent","frameRate","stroke","noFill","draw","initSketch","id"],"sources":["/Users/daria/Documents/MySynth copy/app/javascript/prototypes/prototype_49/sketch.js"],"sourcesContent":["import p5 from 'p5'\nimport { getRandomArbitrary } from '../utilities'\nimport { getStoreShift, getStoreEnthropy, getStoreEffect } from './store'\n\nconst canvasSize = 600\n\nconst shiftSize = {\n  x: 0,\n  y: 0\n}\n\nlet canvasContainerId = ''\n\nlet shiftSeed = 5\nlet cells = 30\nlet cellSize = calcCellSize()\n\nlet xCenter, yCenter\n\nfunction calcCellSize() {\n  return canvasSize / cells\n}\n\nfunction drawTile(p, row, column) {\n  if (getStoreEffect()) {\n    const weight = getRandomArbitrary(0, 4)\n    p.strokeWeight(weight)\n  }\n\n  if (getStoreEnthropy()) {\n    shiftSeed = (row + column) / 8\n  }\n\n  if (getStoreShift()) {\n    const s = getRandomArbitrary(-shiftSeed, shiftSeed)\n    shiftSize.x = s\n    shiftSize.y = s\n  } else {\n    shiftSize.y = getRandomArbitrary(-shiftSeed, shiftSeed)\n  }\n\n  xCenter = (column + 1) * cellSize - cellSize / 2 + shiftSize.x\n  yCenter = (row + 1) * cellSize - cellSize / 2 + shiftSize.y\n\n  if (column === 0) {\n    p.beginShape()\n    p.vertex(xCenter, yCenter)\n  } else {\n    p.bezierVertex(xCenter, yCenter, xCenter, yCenter, xCenter, yCenter)\n  }\n\n  if (column === cells - 1) {\n    p.endShape()\n  }\n}\n\nfunction drawTiles(p) {\n  p.background(0)\n\n  if (getStoreEffect()) {\n    cells = Math.floor(getRandomArbitrary(30, 120))\n    cellSize = calcCellSize()\n  }\n\n  for (let row = 0; row < cells; row++) {\n    for (let column = 0; column < cells; column++) {\n      drawTile(p, row, column)\n    }\n  }\n}\n\nfunction sketch(p) {\n  p.setup = () => {\n    const canvas = p.createCanvas(canvasSize, canvasSize)\n    canvas.parent(canvasContainerId)\n    p.frameRate(6)\n    p.stroke(121, 255, 57)\n    p.noFill()\n    // p.fill(141)\n  }\n\n  p.draw = () => {\n    drawTiles(p)\n  }\n}\n\nfunction initSketch(id) {\n  canvasContainerId = id\n  new p5(sketch)\n}\n\nexport { initSketch }"],"mappings":"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"},"metadata":{},"sourceType":"module"}