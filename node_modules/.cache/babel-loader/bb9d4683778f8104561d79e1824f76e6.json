{"ast":null,"code":"// SAVE TRY\nimport p5 from 'p5';\nimport html2canvas from 'html2canvas';\nimport { getRandomArbitrary, generateHash } from '../prototypes/utilities';\nvar x = 0;\nvar y = 0;\n\nfunction sketch(p) {\n  p.setup = function () {\n    var canvas = p.createCanvas(700, 410);\n    canvas.parent('wrapper');\n    p.frameRate(1); // p.background(0)\n  };\n\n  p.draw = function () {\n    x = getRandomArbitrary(0, 650);\n    y = getRandomArbitrary(0, 350);\n    p.clear();\n    p.background(0, 0, 0, 0);\n    p.fill(100);\n    p.rect(x, y, 50, 50);\n  };\n}\n\nfunction init() {\n  return new Promise(function (resolve, reject) {\n    var wrapper = document.createElement('div');\n    wrapper.classList.add('wrapper');\n    wrapper.id = 'wrapper';\n    var image = document.createElement('div');\n    image.classList.add('image');\n    var container = document.getElementById('prototype_46');\n    wrapper.appendChild(image);\n    container.appendChild(wrapper);\n    var saveButton = document.createElement('div');\n    saveButton.classList.add('saveButton');\n    saveButton.innerText = 'Save';\n    document.body.appendChild(saveButton);\n    saveButton.addEventListener('click', function () {\n      generateImage().then(downloadImage);\n    });\n    resolve();\n  });\n}\n\nfunction generateImage() {\n  return new Promise(function (resolve, reject) {\n    var container = document.getElementById('wrapper');\n    html2canvas(container).then(function (canvas) {\n      canvas.style.position = 'absolute';\n      canvas.style.left = '-99999px';\n      canvas.id = 'tempCanvas';\n      document.body.appendChild(canvas);\n      resolve();\n    });\n  });\n}\n\nfunction downloadImage() {\n  var canvas = document.getElementById('tempCanvas');\n  var imageData = canvas.toDataURL('image/png');\n  var link = document.createElement('a');\n  link.download = \"Prototype-46-\".concat(generateHash(), \".png\");\n  link.href = imageData;\n  link.click();\n  link.remove();\n  canvas.remove();\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  new p5(sketch).then(function () {\n    init();\n  });\n});","map":{"version":3,"names":["p5","html2canvas","getRandomArbitrary","generateHash","x","y","sketch","p","setup","canvas","createCanvas","parent","frameRate","draw","clear","background","fill","rect","init","Promise","resolve","reject","wrapper","document","createElement","classList","add","id","image","container","getElementById","appendChild","saveButton","innerText","body","addEventListener","generateImage","then","downloadImage","style","position","left","imageData","toDataURL","link","download","href","click","remove"],"sources":["/Users/daria/Documents/MySynth copy/app/javascript/packs/prototype_46.js"],"sourcesContent":["// SAVE TRY\n\nimport p5 from 'p5'\nimport html2canvas from 'html2canvas'\nimport { getRandomArbitrary, generateHash } from '../prototypes/utilities'\n\nlet x = 0\nlet y = 0\n\nfunction sketch(p) {\n  p.setup = () => {\n    const canvas = p.createCanvas(700, 410)\n    canvas.parent('wrapper')\n    p.frameRate(1)\n    // p.background(0)\n  }\n\n  p.draw = () => {\n    x = getRandomArbitrary(0, 650)\n    y = getRandomArbitrary(0, 350)\n\n    p.clear()\n    p.background(0, 0, 0, 0)\n    p.fill(100)\n    p.rect(x, y, 50, 50)\n  }\n}\n\nfunction init() {\n  return new Promise((resolve, reject) => {\n    const wrapper = document.createElement('div')\n    wrapper.classList.add('wrapper')\n    wrapper.id = 'wrapper'\n\n    const image = document.createElement('div')\n    image.classList.add('image')\n\n    const container = document.getElementById('prototype_46')\n\n    wrapper.appendChild(image)\n    container.appendChild(wrapper)\n\n    const saveButton = document.createElement('div')\n    saveButton.classList.add('saveButton')\n    saveButton.innerText = 'Save'\n    document.body.appendChild(saveButton)\n\n    saveButton.addEventListener('click', () => {\n      generateImage().then(downloadImage)\n    })\n\n    resolve()\n  })\n}\n\nfunction generateImage() {\n  return new Promise((resolve, reject) => {\n    const container = document.getElementById('wrapper')\n\n    html2canvas(container).then((canvas) => {\n      canvas.style.position = 'absolute'\n      canvas.style.left = '-99999px'\n      canvas.id = 'tempCanvas'\n      document.body.appendChild(canvas)\n\n      resolve()\n    })\n  })\n}\n\nfunction downloadImage() {\n  const canvas = document.getElementById('tempCanvas')\n  const imageData = canvas.toDataURL('image/png')\n\n  const link = document.createElement('a')\n  link.download = `Prototype-46-${generateHash()}.png`\n  link.href = imageData\n  link.click()\n  link.remove()\n\n  canvas.remove()\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new p5(sketch).then(() => {\n    init()\n  })\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}